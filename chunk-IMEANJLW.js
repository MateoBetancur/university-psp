import{a as R,b as Y}from"./chunk-S2TNKNIE.js";import{a as X}from"./chunk-I7NFFR3C.js";import{a as B,b as q,c as A,d as L,e as j,f as k,g as G,h as z,i as H,j as J,l as K,m as Q,n as U}from"./chunk-5DLFTWDC.js";import{$a as y,Ab as P,Ba as _,Fa as g,Ma as d,Oa as e,Pa as t,Ra as x,Sa as C,Ta as M,Va as I,Wa as n,X as p,Xa as S,Y as c,Ya as w,Za as V,_a as u,a as b,ab as f,cb as E,db as N,eb as F,sa as a,wa as v,wb as O,xb as T,yb as W,zb as D}from"./chunk-V4WTADHK.js";function $(r,o){if(r&1&&(e(0,"option",21),n(1),t()),r&2){let i=o.$implicit;d("value",i.id),a(),V(" ",i.name," (",i.role,") ")}}function ee(r,o){if(r&1&&(e(0,"div",22),n(1),t()),r&2){let i=M();a(),w(" ",i.successMessage," ")}}function te(r,o){if(r&1&&(e(0,"tr")(1,"td",19),n(2),t(),e(3,"td",19),n(4),t(),e(5,"td",19),n(6),E(7,"number"),t(),e(8,"td",19),n(9),E(10,"date"),t()()),r&2){let i=o.$implicit;a(2),S(i.employeeName),a(2),S(i.role),a(2),w("$",N(7,4,i.amount),""),a(3),S(F(10,6,i.date,"shortDate"))}}var Z=class r{constructor(o,i){this.salesStorageService=o;this.employeeStorageService=i}sales=[];employees=[];selectedEmployeeId="";newSale=this.getEmptySale();successMessage="";ngOnInit(){this.sales=this.salesStorageService.load(),this.employees=this.employeeStorageService.load()}saveSale(){let o=this.employees.find(i=>i.id===this.selectedEmployeeId);o&&(this.newSale.id=R(),this.newSale.employeeId=o.id,this.newSale.employeeName=o.name,this.newSale.role=o.role,this.sales.push(b({},this.newSale)),this.salesStorageService.save(this.sales),this.successMessage="\xA1Venta registrada exitosamente!",this.newSale=this.getEmptySale(),this.selectedEmployeeId="",setTimeout(()=>{this.successMessage=""},3e3))}getEmptySale(){return{id:"",employeeId:"",employeeName:"",role:"",amount:0,date:""}}static \u0275fac=function(i){return new(i||r)(v(X),v(Y))};static \u0275cmp=_({type:r,selectors:[["app-sales"]],decls:44,vars:7,consts:[["salesForm","ngForm"],[1,"p-6","max-w-4xl","mx-auto","bg-white","rounded-lg","shadow"],[1,"text-2xl","font-bold","mb-4"],["aria-labelledby","sales-section"],[1,"space-y-4","mb-6",3,"ngSubmit"],["id","sales-section",1,"sr-only"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["name","employeeId","required","",1,"border","p-2","rounded","w-full",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","name","amount","required","","min","0","placeholder","Valor de la venta",1,"border","p-2","rounded","w-full",3,"ngModelChange","ngModel"],["type","date","name","date","required","",1,"border","p-2","rounded","w-full",3,"ngModelChange","ngModel"],[1,"pt-4"],["type","submit",1,"bg-green-500","text-white","px-4","py-2","rounded",3,"disabled"],["class","text-green-600 mt-4",4,"ngIf"],[1,"mt-8"],[1,"text-xl","font-bold","mb-4"],[1,"min-w-full","border","text-center"],[1,"bg-gray-100"],[1,"border","px-4","py-2"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-green-600","mt-4"]],template:function(i,l){if(i&1){let m=x();e(0,"main",1)(1,"header")(2,"h2",2),n(3,"Registro de Ventas"),t()(),e(4,"section",3)(5,"form",4,0),C("ngSubmit",function(){return p(m),c(l.saveSale())}),e(7,"fieldset")(8,"legend",5),n(9,"Registro de venta"),t(),e(10,"div",6)(11,"label")(12,"span",7),n(13,"Empleado"),t(),e(14,"select",8),f("ngModelChange",function(s){return p(m),y(l.selectedEmployeeId,s)||(l.selectedEmployeeId=s),c(s)}),g(15,$,2,3,"option",9),t()(),e(16,"label")(17,"span",7),n(18,"Valor de la venta"),t(),e(19,"input",10),f("ngModelChange",function(s){return p(m),y(l.newSale.amount,s)||(l.newSale.amount=s),c(s)}),t()(),e(20,"label")(21,"span",7),n(22,"Fecha de la venta"),t(),e(23,"input",11),f("ngModelChange",function(s){return p(m),y(l.newSale.date,s)||(l.newSale.date=s),c(s)}),t()()(),e(24,"div",12)(25,"button",13),n(26," Registrar Venta "),t()(),g(27,ee,2,1,"div",14),t()()(),e(28,"section",15)(29,"h3",16),n(30,"Ventas Registradas"),t(),e(31,"table",17)(32,"thead",18)(33,"tr")(34,"th",19),n(35,"Empleado"),t(),e(36,"th",19),n(37,"Rol"),t(),e(38,"th",19),n(39,"Valor Venta"),t(),e(40,"th",19),n(41,"Fecha"),t()()(),e(42,"tbody"),g(43,te,11,9,"tr",20),t()()()()}if(i&2){let m=I(6);a(14),u("ngModel",l.selectedEmployeeId),a(),d("ngForOf",l.employees),a(4),u("ngModel",l.newSale.amount),a(4),u("ngModel",l.newSale.date),a(2),d("disabled",!m.form.valid),a(2),d("ngIf",l.successMessage),a(16),d("ngForOf",l.sales)}},dependencies:[P,O,T,D,W,U,k,H,J,B,G,z,q,A,Q,K,j,L],encapsulation:2})};export{Z as SalesComponent};
